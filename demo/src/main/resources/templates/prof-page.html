<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/css/style_interna_prof.css}">
</head>

<body>
    <header>
        <li style="position: relative; left: 100px;">
            <img th:src="@{images/logo.png}" alt="Logo" style="width: 70px; height: 65px;">
        </li>
        <ul>
            <li><a href="#banner">
                    <h1>Home</h1>
                </a></li>
            <li><a href="#sobre-nos">
                    <h1>Cursos</h1>
                </a></li>
            <li><a href="#projetos">
                    <h1>Projetos</h1>
                </a></li>
            <li sec:authorize="isAuthenticated"><a th:href="@{/logout}">
                    <h1>Sair</h1>
                </a></li>

        </ul>
    </header>

    <div id="dashboard-section">
        <h2>DashBoard do Professor, <span id="nome-professor">[[${prof.getNome()}]]</span></h2>
        <!-- Outros elementos do dashboard, como estatísticas ou botões de ação, podem ser adicionados aqui -->
    </div>


    <div id="admin-alunos-section">
        <h2>Administração de Alunos</h2>
        <select id="curso-select" onchange="listarAlunos()">
            <option value="todos">Todos os Alunos</option>
            <option value="Mobile">Desenvolvedor Mobile</option>
            <option value="Back end">Desenvolvedor Back end</option>
            <option value="UX e UI">Desenvolvedor UX UI</option>
            <option value="Analista de dados">Analista de dados</option>
            <option value="Desenvolvedor de software">Desenvolvedor de software</option>
        </select>

    </div>

    <div id="lista-alunos"></div>


    <script th:inline="javascript">
        var alunosMobile = /*[[${alunosMobile}]]*/[];
        var alunosBack = /*[[${alunosBack}]]*/[];
        var alunosUXUI = /*[[${alunosUXUI}]]*/[];
        var alunosDataAnalyst = /*[[${alunosDataAnalyst}]]*/[];
        var alunosDataScientist = /*[[${alunosDataScientist}]]*/[];
        var alunosSoftware = /*[[${alunosSoftware}]]*/[];
        var alunosTodos = /*[[${alunosTodos}]]*/[];
        //Aqui você precisa passar as outras variaveis, dos outros cursos, da mesma forma que acima
        //se vc quiser, vc pode passar mais infos para o js, como cpf/email ou sei la, seria interessante a gente criar um campo hora cadastrada mais pra frente
    </script>

    <!-- Formulário para atualizar faltas do aluno -->
    <h2>Atualizar Faltas do Aluno</h2>
    <form action="/update-faltas" method="post">
        <label for="email">Email do Aluno:</label>
        <input type="email" id="email" name="email" required><br><br>

        <label for="faltas">Novo Número de Faltas:</label>
        <input type="number" id="faltas" name="faltas" required><br><br>

        <button type="submit">Atualizar Faltas</button>
    </form>


    <section id="footer">
        <footer class="rodape-cima">
            <div class="c1">
                <img th:src="@{images/logo.png}" alt="Logo" style="width: 90px; height: 85px;">
                <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Doloribus dolores vitae in earum sequi
                    repellendus numquam minima quis provident </p>

                <span>
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                            d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z"
                            clip-rule="evenodd" />
                    </svg>
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path
                            d="M13.795 10.533 20.68 2h-3.073l-5.255 6.517L7.69 2H1l7.806 10.91L1.47 22h3.074l5.705-7.07L15.31 22H22l-8.205-11.467Zm-2.38 2.95L9.97 11.464 4.36 3.627h2.31l4.528 6.317 1.443 2.02 6.018 8.409h-2.31l-4.934-6.89Z" />
                    </svg>
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path fill="currentColor" fill-rule="evenodd"
                            d="M3 8a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v8a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5V8Zm5-3a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3H8Zm7.597 2.214a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2h-.01a1 1 0 0 1-1-1ZM12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6Zm-5 3a5 5 0 1 1 10 0 5 5 0 0 1-10 0Z"
                            clip-rule="evenodd" />
                    </svg>
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                            d="M12.51 8.796v1.697a3.738 3.738 0 0 1 3.288-1.684c3.455 0 4.202 2.16 4.202 4.97V19.5h-3.2v-5.072c0-1.21-.244-2.766-2.128-2.766-1.827 0-2.139 1.317-2.139 2.676V19.5h-3.19V8.796h3.168ZM7.2 6.106a1.61 1.61 0 0 1-.988 1.483 1.595 1.595 0 0 1-1.743-.348A1.607 1.607 0 0 1 5.6 4.5a1.601 1.601 0 0 1 1.6 1.606Z"
                            clip-rule="evenodd" />
                        <path d="M7.2 8.809H4V19.5h3.2V8.809Z" />
                    </svg>
                </span>
            </div>
            <div class="conjunto c2">
                <h3 style="position: relative; left: 35px; color: black;">Navegação</h3>
                <ul>
                    <li>
                        <a href="">Home</a>
                        <a href="">Cursos</a>
                        <a href="">Projetos</a>
                        <a href="">Portal</a>
                        <a href="">Cadastro</a>
                    </li>
                </ul>
            </div>
            <div class="conjunto c2">
                <h3 style="position: relative; left: 35px; color: black;">Endereço</h3>
                <ul>
                    <li style="gap: 12px;">
                        <a href=""><svg xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                <path fill="#ffffff"
                                    d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z" />
                            </svg>admin@gmail.com</a>
                        <a href=""><svg xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 384 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                <path fill="#ffffff"
                                    d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z" />
                            </svg>ADB abson Street, New York. 1999</a>
                        <a href=""><svg xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                <path fill="#ffffff"
                                    d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z" />
                            </svg>+55192381223</a>
                    </li>
                </ul>
            </div>
            <div class="conjunto c4">
                <h3 style="position: relative; left: 35px; color: black;">Contato</h3>
                <input type="text" placeholder="Insira seu email">
                <input type="text" placeholder="Insira sua mensagem">
                <button type="submit">Enviar</button>
            </div>
        </footer><br>
        <footer class="rodape">
            <hr>
            <p>Copyright © 2024 Igor & Luigi</p>
        </footer>
    </section>
</body>

<!-- No seu template HTML -->
<script th:inline="javascript">
    var deleteUrl = /*[[@{/delete/alunos/}]]*/ '';
    function deleteAluno(id) {
        // Rota de exclusão do aluno
        var deleteUrl = /*[[@{/delete/alunos/}]]*/ '';

        // Configuração da solicitação
        var requestOptions = {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        };

        // Envio da solicitação de exclusão
        fetch(deleteUrl.replace('{id}', id), requestOptions)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro ao excluir aluno');
                }
                // Se a exclusão for bem-sucedida, atualize a página ou faça qualquer outra ação necessária
                location.reload(); // Recarrega a página após a exclusão (opcional)
            })
            .catch(error => {
                console.error('Erro ao excluir aluno:', error);
                // Trate o erro de acordo com suas necessidades, por exemplo, exibindo uma mensagem de erro ao usuário
            });
    }

</script>

<script>

    function listarAlunos() {
        var cursoSelecionado = document.getElementById("curso-select").value;
        var listaAlunos = "";

        if (cursoSelecionado === "todos") {
            listaAlunos = "<h2>Todos os Alunos</h2><table><thead><tr><th>Nome</th><th>Curso</th><th>Excluir</th></tr></thead><tbody>";

            alunosTodos.forEach(aluno => {
                listaAlunos += "<tr><td>" + aluno.nome + "</td><td>" + aluno.curso + "</td><td><a href='" + deleteUrl + aluno.id + "' onclick='deleteAluno(" + aluno.id + ")'>Excluir</a></td></tr>";
            });

            listaAlunos += "</tbody></table>";
        } else {
            // Caso contrário, liste os alunos de acordo com o curso selecionado
            listaAlunos = "<h2>Alunos do Curso - " + cursoSelecionado + "</h2><table><thead><tr><th>Nome</th><th>Curso</th><th>Excluir</th></tr></thead><tbody>";

            var alunos = [];
            if (cursoSelecionado === "Mobile") {
                alunos = alunosMobile;
            } else if (cursoSelecionado === "Back end") {
                alunos = alunosBack;
            } else if (cursoSelecionado === "UX e UI") {
                alunos = alunosUXUI;
            } else if (cursoSelecionado === "Analista de dados") {
                alunos = alunosDataAnalyst;
            } else if (cursoSelecionado === "Cientista de dados") {
                alunos = alunosDataScientist;
            } else if (cursoSelecionado === "Desenvolvedor de software") {
                alunos = alunosSoftware;
            }

            alunos.forEach(aluno => {
                listaAlunos += "<tr><td>" + aluno.nome + "</td><td>" + aluno.curso + "</td><td><a th:href=\"@{/delete/alunos/}" + aluno.id + "\">Excluir</a></td></tr>";
            });



            listaAlunos += "</tbody></table>";
        }

        document.getElementById("lista-alunos").innerHTML = listaAlunos;
    }

</script>

</html>